# 区块链入门教程



**区块链**（英语：blockchain或block chain）是借由密码学串接并保护内容的串连交易记录（又称区块）。

**中本聪**在2008年，于《比特币白皮书》中提出“区块链”概念，并在2009年创立了比特币社会网络，开发出第一个区块，即“创世区块”。

![](http://ww1.sinaimg.cn/large/007jCw9lgy1fw7041ki44j30jg0bomxv.jpg)

*区块链（blockchain）是眼下的大热门，新闻媒体大量报道，宣称它将创造未来。*

*可是，区块链到底是什么，有何特别之处，今天我们就一起来了解一下吧！*

## 一、区块链的本质

区块链是什么？

一句话，它是一种特殊的分布式数据库。

首先，区块链的主要作用是储存信息。任何需要保存的信息，都可以写入区块链，也可以从里面读取，所以它是数据库。

其次，任何人都可以架设服务器，加入区块链网络，成为一个节点。区块链的世界里面，没有中心节点，每个节点都是平等的，都保存着整个数据库。你可以向任何一个节点，写入/读取数据，因为所有节点最后都会同步，保证区块链一致。

![](http://ww1.sinaimg.cn/large/007jCw9lgy1fw708t6z3cj30jg09pdgt.jpg)

## 二、区块链的特点

1.去中介化

由于使用分布式核算和存储，体系不存在中心化的硬件或管理机构，任意节点的权利和义务都是均等的，系统中的数据块由整个系统中具有维护功能的节点来共同维护。

2.开放性

系统是开放的，除了交易各方的私有信息被加密外，区块链的数据对所有人公开，任何人都可以通过公开的接口查询区块链数据和开发相关应用，因此整个系统信息高度透明。

3.自治性

区块链采用基于协商一致的规范和协议（比如一套公开透明的算法）使得整个系统中的所有节点能够在去信任的环境自由安全的交换数据，使得对“人”的信任改成了对机器的信任，任何人为的干预不起作用。

4.信息不可篡改

一旦信息经过验证并添加至区块链，就会永久的存储起来，除非能够同时控制住系统中超过51%的节点，否则单个节点上对数据库的修改是无效的，因此区块链的数据稳定性和可靠性极高。

5.匿名性

由于节点之间的交换遵循固定的算法，其数据交互是无需信任的（区块链中的程序规则会自行判断活动是否有效），因此交易对手无须通过公开身份的方式让对方对自己产生信任，对信用的累积非常有帮助。

![](http://ww1.sinaimg.cn/large/007jCw9lgy1fw70efhbp9j30zk0qkqe3.jpg)

区块链的最大特点就是“区块链没有管理员，它是彻底无中心的”。

其他的数据库都有管理员，但是区块链没有。如果有人想对区块链添加审核，也实现不了，因为它的设计目标就是防止出现居于中心地位的管理当局。

正是因为无法管理，区块链才能做到无法被控制。否则一旦大公司大集团控制了管理权，他们就会控制整个平台，其他使用者就都必须听命于他们了。

## 三、区块

#### 区块链由一个个区块（block）组成。

区块很像数据库的记录，每次写入数据，就是创建一个区块。

![](http://ww1.sinaimg.cn/large/007jCw9lgy1fw70nyxpx7j30or0fnt9j.jpg)

#### 每个区块包含两个部分。

区块头（Head）：记录当前区块的特征值

区块体（Body）：实际数据

#### 区块头包含了当前区块的多项特征值。

生成时间

实际数据（即区块体）的哈希

上一个区块的哈希

...
## 四、Hash是什么

所谓"哈希"就是计算机可以对任意内容，计算出一个长度相同的特征值。

区块链的 哈希长度是256位，这就是说，不管原始内容是什么，最后都会计算出一个256位的二进制数字。而且可以保证，只要原始内容不同，对应的哈希一定是不同的。

举例来说，字符串123的哈希a8fdc205a9f19cc1c7507a60c4f01b13d11d7fd0（十六进制），转成二进制就是256位，而且只有123能得到这个哈希。（理论上，其他字符串也有可能得到这个哈希，但是概率极低，可以近似认为不可能发生。）

#### 因此，就有两个重要的推论。

推论1：每个区块的哈希都是不一样的，可以通过哈希标识区块。

推论2：如果区块的内容变了，它的哈希一定会改变。

## 五、Hash的不可修改性
区块与哈希是一一对应的，每个区块的哈希都是针对"区块头"（Head）计算的。也就是说，把区块头的各项特征值，按照顺序连接在一起，组成一个很长的字符串，再对这个字符串计算哈希。

Hash = SHA256( 区块头 )

上面就是区块哈希的计算公式，SHA256是区块链的哈希算法。注意，这个公式里面只包含区块头，不包含区块体，也就是说，哈希由区块头唯一决定，

![](http://ww1.sinaimg.cn/large/007jCw9lgy1fw70um32l5j30hq06ygnl.jpg)

前面说过，区块头包含很多内容，其中有当前区块体的哈希，还有上一个区块的哈希。这意味着，如果当前区块体的内容变了，或者上一个区块的哈希变了，一定会引起当前区块的哈希改变。

这一点对区块链有重大意义。如果有人修改了一个区块，该区块的哈希就变了。为了让后面的区块还能连到它（因为下一个区块包含上一个区块的哈希），该人必须依次修改后面所有的区块，否则被改掉的区块就脱离区块链了。由于后面要提到的原因，哈希的计算很耗时，短时间内修改多个区块几乎不可能发生，除非有人掌握了全网51%以上的计算能力。

正是通过这种联动机制，区块链保证了自身的可靠性，数据一旦写入，就无法被篡改。这就像历史一样，发生了就是发生了，从此再无法改变。

每个区块都连着上一个区块，这也是"区块链"这个名字的由来。

## 六、采矿

由于必须保证节点之间的同步，所以新区块的添加速度不能太快。试想一下，你刚刚同步了一个区块，准备基于它生成下一个区块，但这时别的节点又有新区块生成，你不得不放弃做了一半的计算，再次去同步。因为每个区块的后面，只能跟着一个区块，你永远只能在最新区块的后面，生成下一个区块。所以，你别无选择，一听到信号，就必须立刻同步。

所以，区块链的发明者中本聪（这是假名，真实身份至今未知）故意让添加新区块，变得很困难。他的设计是，平均每10分钟，全网才能生成一个新区块，一小时也就六个。

这种产出速度不是通过命令达成的，而是故意设置了海量的计算。也就是说，只有通过极其大量的计算，才能得到当前区块的有效哈希，从而把新区块添加到区块链。由于计算量太大，所以快不起来。

这个过程就叫做采矿（mining），因为计算有效哈希的难度，好比在全世界的沙子里面，找到一粒符合条件的沙子。计算哈希的机器就叫做矿机，操作矿机的人就叫做矿工。

## 七、区块链的分叉

即使区块链是可靠的，现在还有一个问题没有解决：如果两个人同时向区块链写入数据，也就是说，同时有两个区块加入，因为它们都连着前一个区块，就形成了分叉。这时应该采纳哪一个区块呢？

![](http://ww1.sinaimg.cn/large/007jCw9lgy1fw70z7mjzhj30au03ma9v.jpg)

现在的规则是，新节点总是采用最长的那条区块链。如果区块链有分叉，将看哪个分支在分叉点后面，先达到6个新区块（称为"六次确认"）。按照10分钟一个区块计算，一小时就可以确认。

![](http://ww1.sinaimg.cn/large/007jCw9lgy1fw70zhlmyzj30d502f3yc.jpg)

由于新区块的生成速度由计算能力决定，所以这条规则就是说，拥有大多数计算能力的那条分支，就是正宗的区块链。

## 相关链接


[How does blockchain really work?]<https://medium.freecodecamp.org/how-does-blockchain-really-work-i-built-an-app-to-show-you-6b70cd4caf7d>

[Bitcoin mining the hard way: the algorithms, protocols, and bytes]<http://www.righto.com/2014/02/bitcoin-mining-hard-way-algorithms.html>